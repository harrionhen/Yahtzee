<!DOCTYPE html>
<html>
	<head>
		<title>Yahtzee!</title>
		<script src = "http://code.createjs.com/createjs-2013.02.12.min.js"></script>
		<script>
			var stage; 
			var queue;
			var bmp;
			var data;
			function init() {
				stage = new createjs.Stage("yahtzee");
				
				queue = new createjs.LoadQueue(false);
				queue.installPlugin(createjs.Sound);
				queue.addEventListener("complete", loaded);
				queue.loadManifest([{id:"diceroll", src: "sounds/diceroll.mp3"}, {id:"dicefaces", src: "images/dicefaces.png"}]);
			} 
			
			function loaded(event){
				var ball = new createjs.Shape();
				ball.addEventListener("click", onClick);
				ball.graphics.beginFill("#00ff00").drawCircle(0, 0, 50);
				ball.x = 50;
				ball.y = 200;
				
				createjs.Tween.get(ball, {loop: true}).to({x: 450}, 3000).to({x: 50}, 3000);
				createjs.Ticker.addEventListener("tick", tick);
				
				stage.addChild(ball);
				data = new createjs.SpriteSheet({"images": [queue.getResult("dicefaces")], 
												"frames": {"regX": 0, "height": 97, "count": 6, "regY": 0, "width": 100},
												"animations": {"one": [0, 0, "one"], "two": [1, 1, "two"], "three": [2, 2, "three"], "four": [3, 3, "four"], "five": [4, 4, "five"], "six": [5, 5, "six"]}
				});
				

			}
			
			function tick(event){
				stage.update();
			}
			
			function onClick(event){
				bmp = new createjs.Sprite(data, "one");
				bmp.x = Math.random()*500;
				bmp.y = Math.random()*500;
				
				stage.addChild(bmp);
				
				createjs.Sound.play("diceroll");
			}
		</script>
	</head>
	<body onload = "init()" style = "background-color: green">
		<canvas id = "yahtzee" width = "500" height = "500">
			Canvases are not supported in this browser.
		</canvas>
	</body>
</html>
